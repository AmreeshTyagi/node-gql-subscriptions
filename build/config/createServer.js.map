{"version":3,"sources":["../../src/config/createServer.js"],"names":["app","port","get","server","listen","on","error","syscall","code","console","process","exit","addr","address","bind","log"],"mappings":";;;;;;AAAA;;kBAEe,UAACA,GAAD,EAAS;AACtB,MAAMC,OAAOD,IAAIE,GAAJ,CAAQ,MAAR,CAAb;AACA;AACA,MAAMC,SAAS,wBAAaH,GAAb,CAAf;;AAEAG,SAAOC,MAAP,CAAcH,IAAd;;AAEAE,SAAOE,EAAP,CAAU,OAAV,EAAmB,UAACC,KAAD,EAAW;AAC5B,QAAIA,MAAMC,OAAN,KAAkB,QAAtB,EAAgC;AAC9B,YAAMD,KAAN;AACD;;AAED;AACA,YAAQA,MAAME,IAAd;AACE,WAAK,QAAL;AACEC,gBAAQH,KAAR,WAAsBL,IAAtB;AACAS,gBAAQC,IAAR,CAAa,CAAb;AACA;AACF,WAAK,YAAL;AACEF,gBAAQH,KAAR,WAAsBL,IAAtB;AACAS,gBAAQC,IAAR,CAAa,CAAb;AACA;AACF;AACE,cAAML,KAAN;AAVJ;AAYD,GAlBD;;AAoBAH,SAAOE,EAAP,CAAU,WAAV,EAAuB,YAAM;AAC3B,QAAMO,OAAOT,OAAOU,OAAP,EAAb;AACA,QAAMC,OAAO,OAAOF,IAAP,KAAgB,QAAhB,aACDA,IADC,aAEDA,KAAKX,IAFjB;AAGAQ,YAAQM,GAAR,mBAA4BD,IAA5B;AACD,GAND;;AAQA,SAAOX,MAAP;AACD,C","file":"createServer.js","sourcesContent":["import { createServer } from 'http';\n\nexport default (app) => {\n  const port = app.get('port');\n  // create http server\n  const server = createServer(app);\n\n  server.listen(port);\n\n  server.on('error', (error) => {\n    if (error.syscall !== 'listen') {\n      throw error;\n    }\n\n    // handle specific listen errors with friendly messages\n    switch (error.code) {\n      case 'EACCES':\n        console.error(`Port ${port} requires elevated privileges`);\n        process.exit(1);\n        break;\n      case 'EADDRINUSE':\n        console.error(`Port ${port} is already in use`);\n        process.exit(1);\n        break;\n      default:\n        throw error;\n    }\n  });\n\n  server.on('listening', () => {\n    const addr = server.address();\n    const bind = typeof addr === 'string'\n      ? `pipe ${addr}`\n      : `port ${addr.port}`\n    console.log(`Listening on ${bind}`);\n  });\n\n  return server;\n}\n"]}